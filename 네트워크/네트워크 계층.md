# 네트워크 계층
    네트워크를 구성할 때 필요한 각종 스펙들을 계층으로 구분하여 분리해 놓았다. 이렇게 분리해둔 덕분에 서로 다른 회사들에서 만든 장비들이 서로 통신할 수 있다.
    이 계층들은 특정 계층이 변경되었을 때 다른 계층은 영향을 받지 않도록 설계되어있다.
    OSI 7계층으로 구분하는 방법과 TCP/IP 4계층으로 구분하는 방법이 있다.
## OSI 7계층
    가장 상위 계층에 속하는 응용층(Application Layer, 7계층), 표현층(Presentation Layer, 6계층), 세션층(Session Layer, 5계층), 전송층(Transport Layer, 4계층), 네트워크층(Network Layer, 3계층), 데이터링크층(DataLink Layer, 2계층) 그리고 가장 하위 계층에 속하는 물리층(Physical Layer, 1계층)등 7개의 계층으로 나누어진다. 
    물론 모든 통신 시스템이 7계층을 다 가지고 있는 것은 아니다. Gateway 와같은 장비들은 7계층을 다 구현한 기능을 가지고 있고 케이블과 같이 1계층만 구현한 장비나 또는 라우터와 같이 3계층만 구현한 장비도 있다. 
    즉, 필요에 따라 모든 하드웨어 및 소프트웨어는 하나의 계층만으로 구현될 수도 있고 여러 개의 계층에 걸쳐 구현될 수도 있다. 
    두 컴퓨터가 서로 네트워크를 형성하여 데이터를 주고받기 위해서는 7계층이 다 구현되어야 하며, 각각의 계층은 서로 독립된 기능을 제공한다. 서로 인접한 계층 간에만 의존하게 된다.
- 1 ~ 4계층은 컴퓨터간의 데이터의 전송을 담당한다.
- 5 ~ 7계층은 하나의 컴퓨터 내부에서의 프로세스들 사이의 통신을 담당한다.
## 데이터 캡슐화
- 사용자 데이터가 각 계층을 지나면서 하위 계층은 상위 계층으로부터 온 정보를 데이터로 취급하며, 자신의 계층 특성을 담은 제어정보(주소, 에러 제어 등)를 헤더화 시켜 붙이는 일련의 과정을 말한다.

- 데이터를 전송할 때는 응용계층에서 시작해서 하위 계층으로 내려가면서 데이터에 헤더와 푸터를 붙이면서 PDU를 만들어간다. 최종적으로 물리계층에서 PDU 가 완성되고, 이를 수신받은 쪽에서 헤더와 푸터를 차례대로 제거하면서 데이터를 받게 된다.
### 1계층 : 물리계층(Physical Layer)
```
네트워크에서 데이터가 전송되는 물리적인 매체에 대한 계층이다. 전압, 케이블 사양등을 비롯해 사용된 모든 하드웨어에 대한 물리적, 전기적 특성을 정의한다. 가장 복잡한 계층이다.
```
- 장비 : 허브, 케이블
### 2계층 : 데이터링크층(DataLink Layer)
```
물리적인 네트워크를 통해 데이터를 전송하는 수단을 제공하는 계층이다. 즉, 1홉(hop) 통신을 담당한다. 
```
hop : 네트워크에서 출발지와 목적지 사이에 위치한 경로의 한 부분으로, 하나의 장비에서 다음 장비까지를 1 hop 이라고 한다.

- 데이터링크 계층의 주목적은 노드와 노드 사이에 신뢰성있는 전송을 보장하는 것이다. 네트워크 위의 장비들 사이의 데이터 전송, 물리계층 장비의 오류나 변형(케이블에 다른 전자기파가 간섭을 발생한다던지 등)으로 인해 데이터에 변형이 생길 경우 이를 감지해 올바르게 수정하는 기능적, 절차적 수단을 제공한다. 이를 위해 CRC 기반의 에러 검출과 재전송, 흐름 제어를 제공하고, MAC 주소를 부여해 각 장비들을 식별할 수 있게 해준다.
- 장비 : 브릿지, 스위치
- 프로토콜 : 이더넷

### 3계층 : 네트워크층(Network Layer)
```
2 hop 이상의 통신을 담당한다. MAC 주소는 바로 붙어있는 노드들을 식별하기 위한 주소이다. 자신과 직접 연결되어있지 않은 노드와 통신 하기 위해선 자신과 연결된 노드를 거치고 또 그것과 연결된 노드를 거치는방식으로 통신을 해야 하는데, 이를 위해서는 어떤 노드를 거쳐야 하는지 결정해야 하는데, 이를 라우팅 이라고 하고 네트워크 계층이 라우팅을 담당한다.
```
- 장비 : 라우터
- 프로토콜 : IP, ARP, RARP, GARP, ICMP
### 4계층 : 전송층(Transport Layer)
```
데이터가 오류없이 제대로 도착했는지 검증하고, 데이터를 어떤 어플리케이션에 보낼 것인지 결정하는 계층이다.
```
- 송신자와 수신자 간의 신뢰성있고 효율적인 데이터를 전송하기 위하여 오류검출 및 복구, 흐름제어와 중복검사 등을 수행한다.
- 포트번호를 통해 어던 애플리케이션에 보낼 데이터인지 식별한다.
- 연결형 프로토콜(TCP 등)과 비 연결형 프로토콜(UDP 등)을 모두 사용할 수 있다.
---
### 5계층 : 세션층(Session Layer)
     응용 프로그램 간의 통신을 하기 위한 세션을 운영체제를 통해 확립, 유지, 중단하는 작업을 수행한다.
     즉, 응용 프로그램들 간의 접속을 설정, 유지하고 끊어질 경우 데이터를 재전송하거나 연결을 복구한다.
- 세션: 프로세스들 사이에 통신을 수행하기 위해서 메시지 교환을 통해 서로를 인식 한 이후부터 통신을 마칠 때까지의 기간. 즉, 응용 프로그램들 간의 접속을 설정, 유지하고 끊어질 경우 데이터를 재전송하거나 연결을 복구한다. <b>이를 위해 동기점을 설정하여 동기화를 한다.</b>

세션 계층 역할 요약
- 사용자 위주의 논리적인 연결 서비스 제공
- 전송모드 설정 (반이중, 전이중, 단방향, 병렬, 직렬, 동기, 비동기)
- 대화와 동기를 위한 데이터 교환 관리
### 6계층 : 표현층(Presentation Layer)
- 사용자들이 상위나 하위계층에서 사용하는 <b>데이터 표현양식</b>과 무관하게 사용할 수 있도록 해주는 환경을 제공한다.
### 7계층 : 응용층(Application Layer)